<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/template/templateGeral.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui">



	<ui:define name="conteudo">
		<div>
			<h:form id="form">
				<p:panel>
					<div id="info1">
						<p:panel header="Informações do Setor" style="height:280px">
							<p:panel style="background-color:#FFFFFF">
								<span class="txtValor">Existem <span
									style="color: blue; font-weight: bold">#{solicitacaoBean.qntSolicitacaoAberta}</span>
									Solicitações em aberto
								</span>
							</p:panel>
							<!-- APENAS APARECE PARA SUPERVISOR -->
							<p:panel style="background-color:#FFFFFF"
								rendered="#{facesContext.externalContext.isUserInRole('supervisao')}">
								<span class="txtValor"> Existem <span
									style="color: blue; font-weight: bold">#{solicitacaoBean.qntOrdemoAberta}</span>
									ordens de serviço aberta para o seu setor
								</span>
							</p:panel>

						</p:panel>
					</div>

					<div id="info2">
						<p:panel header="Outras Informações" style="height:280px">
							<p:panel style="background-color:#FFFFFF">
								<span class="txtValor">Não há informação</span>
							</p:panel>
						</p:panel>
					</div>

					<div id="info3">
						<p:panel header="Relatorio" style="height:280px">
							<p:panel style="background-color:#FFFFFF">
								<span class="txtValor">Verificar informação que será
									necessario por aqui</span>
							</p:panel>
						</p:panel>
					</div>
					<div class="clear"></div>
				</p:panel>

				<div id="tabelaUltimas">
					<p:panel
						header="#{facesContext.externalContext.isUserInRole('planejamento')?'Ultimas Ordens Criadas':'Lista de Ordens com Pendencia'}">
						<p:dataTable value="#{solicitacaoBean.ultimasOrdens}" var="item"
							emptyMessage="#{facesContext.externalContext.isUserInRole('planejamento')?'Sem ordens no sistema':'Sem pendencias'}"
							rowStyleClass="linhatabela">
							<p:column>
      							Numero: <span class="txtValor">OSN#{item.id}</span>
							</p:column>
							<p:column style="width:300px">
      							Tipo de trabalho: <span class="txtValor">#{item.tipoTrabalho}</span>
							</p:column>
							<p:column>
      							Status: <span class="txtValor">#{item.status}</span>
							</p:column>

							<p:column>
      							Criada Em: <h:outputLabel value="#{item.dataCriacao}"
									styleClass="txtValor">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputLabel>
							</p:column>

							<p:column style="width:50px">
								<p:commandButton oncomplete="PF('dlg').show()"
									update=":form:modalOrdem" image="/images/binoculoPreview.png">
									<f:setPropertyActionListener value="#{item}"
										target="#{solicitacaoBean.ordemSelecionada}" />
								</p:commandButton>
							</p:column>
						</p:dataTable>

						<p:dialog
							header="Detalhes Ordem #{solicitacaoBean.ordemSelecionada.tipoOrdem}"
							widgetVar="dlg" modal="true" height="550px" width="650px"
							id="modalOrdem">
							<p:panelGrid columns="2" columnClasses="txtLabel, txtValor"
								>
								<p:outputLabel value="Ordem: " />
								<h:outputText value="#{solicitacaoBean.ordemSelecionada.tipoOrdem}"/>

								<p:outputLabel value="Ciclo da Ordem: "
									rendered="#{solicitacaoBean.ordemSelecionada.cicloPreventiva != 0}" />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.cicloPreventiva}"
									rendered="#{solicitacaoBean.ordemSelecionada.cicloPreventiva != 0}" />

								<p:outputLabel value="Modo Corretivo: "
									rendered="#{solicitacaoBean.ordemSelecionada.cicloPreventiva == 0}" />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.modoCorretivo}"
									rendered="#{solicitacaoBean.ordemSelecionada.cicloPreventiva == 0}" />

								<p:outputLabel value="Status: " />
								<h:outputText value="#{solicitacaoBean.ordemSelecionada.status}" />

								<p:outputLabel value="Data de criação:" />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.dataCriacao}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>

								<p:outputLabel value="Equipamento: " />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.equipamento}" />

								<p:outputLabel value="Componente: " />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.componente}" />

								<p:outputLabel value="Equipamento parado: " />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.equipamentoParado ? 'SIM' : 'NÃO'}" />

								<p:outputLabel value="Departamento: " />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.setor.nome}" />

								<p:outputLabel value="Ação:" />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.descricaoAcao}" />

							</p:panelGrid>

							<p:panelGrid columns="2" columnClasses="txtLabel, txtValor"
								rendered="#{solicitacaoBean.ordemSelecionada.status == 'ENCERRADO'}">

								<p:outputLabel value="Solução" />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.descricaoSolucao}" />

								<p:outputLabel value="Data de criação:" />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.dataCriacao}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>

								<p:outputLabel value="Iniciado em: " />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.dataInicio}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>

								<p:outputLabel value="Hora: " />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.horaInicio}">
									<f:convertDateTime pattern="hh:mm:ss" />
								</h:outputText>

								<p:outputLabel value="Finalizado em: " />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.dataFinal}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>

								<p:outputLabel value="Hora: " />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.horaFinal}">
									<f:convertDateTime pattern="hh:mm:ss" />
								</h:outputText>

								<p:outputLabel value="Observação: " />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.observacao}" />
							</p:panelGrid>
						</p:dialog>
					</p:panel>
				</div>
			</h:form>
		</div>
	</ui:define>
</ui:composition>