<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/template/templateGeral.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	
	<ui:define name="conteudoExterno">
	
	<h:outputScript library="js" name="index.js"/>
	</ui:define>
	
	<f:metadata>
		<f:viewAction action="#{solicitacaoBean.carregarDados()}" />
		<f:viewAction action="#{ordemServicoBean.carregarInformacoes()}" />
	</f:metadata>


	<ui:define name="conteudo">
		<div>
			<h:form id="form">
				<p:accordionPanel>
					<p:tab title="RELATORIO DE QUANTIDADE POR CT">
						<p:dataTable value="#{ordemServicoBean.departamentos}"
							var="centro">
							<p:columnGroup type="header">
								<p:row>
									<p:column rowspan="3">
										<f:facet name="header">
											<span>CENTRO DE TRABALHO</span>
										</f:facet>
									</p:column>
									<p:column colspan="4">
										<f:facet name="header">
											<span>Total de ordens no Sistema: </span>
											<span style="color: red; font-size: 18px;">#{ordemServicoBean.totalDeOrdem}</span>
										</f:facet>
									</p:column>
								</p:row>
								<p:row>
									<p:column colspan="2">
										<f:facet name="header">
											<span>Quantidade de Preventivas: </span>
											<span style="color: red; font-size: 18px;">0</span>
										</f:facet>
									</p:column>
									<p:column colspan="2">
										<f:facet name="header">
											<span>Quantidade de Corretivas: </span>
											<span style="color: red; font-size: 18px;">#{ordemServicoBean.totalDeOrdem}</span>
										</f:facet>
									</p:column>
								</p:row>
								<p:row>
									<p:column headerText="ABERTAS" />
									<p:column headerText="ANDAMENTO" />
									<p:column headerText="PENDENTES" />
									<p:column headerText="ENCERRADAS" />
								</p:row>
							</p:columnGroup>
							<p:column>
								<h:outputText styleClass="txtLabel" value="#{centro.nome}" />
							</p:column>
							<p:column styleClass="txtNumero">
								#{centro.nome == 'Eletrica' ? ordemServicoBean.dataGridUtil.eletrica.aberta : ''}
								#{centro.nome == 'Mecanica' ? ordemServicoBean.dataGridUtil.mecanica.aberta : ''}
								#{centro.nome == 'Manutencao' ? ordemServicoBean.dataGridUtil.manutencao.aberta : ''}
								#{centro.nome == 'Operacional' ? ordemServicoBean.dataGridUtil.operacional.aberta : ''}
								#{centro.nome == 'Refrigeracao' ? ordemServicoBean.dataGridUtil.refrigeracao.aberta : ''}
								#{centro.nome == 'Administracao' ? ordemServicoBean.dataGridUtil.administracao.aberta : ''}
								#{centro.nome == 'Planejamento' ? ordemServicoBean.dataGridUtil.planejamento.aberta : ''}
							</p:column>
							<p:column styleClass="txtNumero">
								#{centro.nome == 'Eletrica' ? ordemServicoBean.dataGridUtil.eletrica.andamento : ''}
								#{centro.nome == 'Mecanica' ? ordemServicoBean.dataGridUtil.mecanica.andamento : ''}
								#{centro.nome == 'Manutencao' ? ordemServicoBean.dataGridUtil.manutencao.andamento : ''}
								#{centro.nome == 'Operacional' ? ordemServicoBean.dataGridUtil.operacional.andamento : ''}
								#{centro.nome == 'Refrigeracao' ? ordemServicoBean.dataGridUtil.refrigeracao.andamento : ''}
								#{centro.nome == 'Administracao' ? ordemServicoBean.dataGridUtil.administracao.andamento : ''}
								#{centro.nome == 'Planejamento' ? ordemServicoBean.dataGridUtil.planejamento.andamento : ''}
							</p:column>
							<p:column styleClass="txtNumero">
								#{centro.nome == 'Eletrica' ? ordemServicoBean.dataGridUtil.eletrica.pendente : ''}
								#{centro.nome == 'Mecanica' ? ordemServicoBean.dataGridUtil.mecanica.pendente : ''}
								#{centro.nome == 'Manutencao' ? ordemServicoBean.dataGridUtil.manutencao.pendente : ''}
								#{centro.nome == 'Operacional' ? ordemServicoBean.dataGridUtil.operacional.pendente : ''}
								#{centro.nome == 'Refrigeracao' ? ordemServicoBean.dataGridUtil.refrigeracao.pendente : ''}
								#{centro.nome == 'Administracao' ? ordemServicoBean.dataGridUtil.administracao.pendente : ''}
								#{centro.nome == 'Planejamento' ? ordemServicoBean.dataGridUtil.planejamento.pendente : ''}
							</p:column>
							<p:column styleClass="txtNumero">
								#{centro.nome == 'Eletrica' ? ordemServicoBean.dataGridUtil.eletrica.encerrada : ''}
								#{centro.nome == 'Mecanica' ? ordemServicoBean.dataGridUtil.mecanica.encerrada : ''}
								#{centro.nome == 'Manutencao' ? ordemServicoBean.dataGridUtil.manutencao.encerrada : ''}
								#{centro.nome == 'Operacional' ? ordemServicoBean.dataGridUtil.operacional.encerrada : ''}
								#{centro.nome == 'Refrigeracao' ? ordemServicoBean.dataGridUtil.refrigeracao.encerrada : ''}
								#{centro.nome == 'Administracao' ? ordemServicoBean.dataGridUtil.administracao.encerrada : ''}
								#{centro.nome == 'Planejamento' ? ordemServicoBean.dataGridUtil.planejamento.encerrada : ''}
							</p:column>
						</p:dataTable>
					</p:tab>
					<p:tab title="RELATORIO DE ORDENS POR PORCENTAGEM">
						<p:panelGrid>
							<f:facet name="header">
								<p:row>
									<p:column colspan="8">
										<h:outputText value="TOTAL DE ORDENS NO SISTEMA: " />
										<span style="color: red; font-size: 18px">#{ordemServicoBean.totalDeOrdem}</span>
									</p:column>
								</p:row>
								<p:row>
									<p:column colspan="2" />
									<p:column>ABERTAS</p:column>
									<p:column>ANDAMENTO</p:column>
									<p:column>CONFIRMADAS</p:column>
									<p:column>ENCERRADAS</p:column>
									<p:column>PENDENTES</p:column>
								</p:row>
							</f:facet>
							<p:row>
								<p:column colspan="2" rowspan="2" styleClass="txtLabel"
									style="text-align:center">PREVENTIVAS</p:column>
								<p:column styleClass="txtNumero"></p:column>
								<p:column styleClass="txtNumero"></p:column>
								<p:column styleClass="txtNumero"></p:column>
								<p:column styleClass="txtNumero"></p:column>
								<p:column styleClass="txtNumero"></p:column>
							</p:row>
							<p:row>
								<p:column style="text-align:center">
									<p:progressBar value="0" labelTemplate="0 / 0"
										displayOnly="true" />
								</p:column>
								<p:column style="text-align:center">
									<p:progressBar value="0" labelTemplate="0 / 0"
										displayOnly="true" />
								</p:column>
								<p:column style="text-align:center">
									<p:progressBar value="0" labelTemplate="0 / 0"
										displayOnly="true" />
								</p:column>
								<p:column style="text-align:center">
									<p:progressBar value="0" labelTemplate="0 / 0"
										displayOnly="true" />
								</p:column>
								<p:column style="text-align:center">
									<p:progressBar value="0" labelTemplate="0 / 0"
										displayOnly="true" />
								</p:column>
							</p:row>
							<p:row>
								<p:column style="background-color:rgb(156,149,134)" colspan="8" />
							</p:row>
							<p:row>
								<p:column colspan="2" rowspan="2" styleClass="txtLabel"
									style="text-align:center">CORRETIVAS</p:column>
								<p:column styleClass="txtNumero">#{ordemServicoBean.ordemAberta*100 / ordemServicoBean.totalDeOrdem }%</p:column>
								<p:column styleClass="txtNumero">#{ordemServicoBean.ordemAndamento*100 / ordemServicoBean.totalDeOrdem }%</p:column>
								<p:column styleClass="txtNumero">#{ordemServicoBean.ordemConfirmada*100 / ordemServicoBean.totalDeOrdem }%</p:column>
								<p:column styleClass="txtNumero">#{ordemServicoBean.ordemEncerrada*100 / ordemServicoBean.totalDeOrdem }%</p:column>
								<p:column styleClass="txtNumero">#{ordemServicoBean.ordemPendente*100 / ordemServicoBean.totalDeOrdem }%</p:column>
							</p:row>
							<p:row>
								<p:column style="text-align:center">
									<p:progressBar
										value="#{ordemServicoBean.ordemAberta*100 / ordemServicoBean.totalDeOrdem }"
										labelTemplate="#{ordemServicoBean.ordemAberta} / #{ordemServicoBean.totalDeOrdem}"
										displayOnly="true" />
								</p:column>
								<p:column style="text-align:center">
									<p:progressBar
										value="#{ordemServicoBean.ordemAndamento*100 / ordemServicoBean.totalDeOrdem }"
										labelTemplate="#{ordemServicoBean.ordemAndamento} / #{ordemServicoBean.totalDeOrdem}"
										displayOnly="true" />
								</p:column>
								<p:column style="text-align:center">
									<p:progressBar
										value="#{ordemServicoBean.ordemConfirmada*100 / ordemServicoBean.totalDeOrdem }"
										labelTemplate="#{ordemServicoBean.ordemConfirmada} / #{ordemServicoBean.totalDeOrdem}"
										displayOnly="true" />
								</p:column>
								<p:column style="text-align:center">
									<p:progressBar
										value="#{ordemServicoBean.ordemEncerrada*100 / ordemServicoBean.totalDeOrdem }"
										labelTemplate="#{ordemServicoBean.ordemEncerrada} / #{ordemServicoBean.totalDeOrdem}"
										displayOnly="true" />
								</p:column>
								<p:column style="text-align:center">
									<p:progressBar
										value="#{ordemServicoBean.ordemPendente*100 / ordemServicoBean.totalDeOrdem }"
										labelTemplate="#{ordemServicoBean.ordemPendente} / #{ordemServicoBean.totalDeOrdem}"
										displayOnly="true" />
								</p:column>
							</p:row>

						</p:panelGrid>
					</p:tab>
					<p:tab title="RELATORIOS GRAFICOS">
						<p:chart type="bar" model="#{ordemServicoBean.barModel}"
							style="height:300px" />
					</p:tab>
				</p:accordionPanel>
			</h:form>
		</div>
	</ui:define>
</ui:composition>