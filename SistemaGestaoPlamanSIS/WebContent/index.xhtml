<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/template/templateGeral.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui">



	<ui:define name="conteudo">
		<div>
			<h:form id="form">
				<div id="info1">
					<p:panel header="Informações do Setor" style="height:280px">
						<p:panel>
							<span class="txtValor">Existem <span
								style="color: blue; font-weight: bold">#{solicitacaoBean.qntSolicitacaoAberta}</span>
								Solicitações em aberto
							</span>
						</p:panel>
						<p:panel>
							<span class="txtValor"> Existem <span
								style="color: blue; font-weight: bold">#{solicitacaoBean.qntOrdemoAberta}</span>
								ordens de serviço aberta para o seu setor
							</span>
						</p:panel>
					</p:panel>
				</div>

				<div id="info2">
					<p:panel header="Outras Informações" style="height:280px">
						<p:panel>
							<span class="txtValor">Não há informação</span>
						</p:panel>
					</p:panel>
				</div>

				<div id="info3">
					<p:panel header="Relatorio" style="height:280px">
						<p:panel>
							<span class="txtValor">Verificar informação que será
								necessario por aqui</span>
						</p:panel>
					</p:panel>
				</div>

				<div id="tabelaUltimas">
					<p:panel header="Ultimas ordens geradas" style="height:250px">
						<p:dataTable value="#{solicitacaoBean.ultimasOrdens}" var="item"
							emptyMessage="Não há nenhuma ordem lançada para o seu setor">
							<p:column>
      							Numero: <span class="txtValor">OSN#{item.id}</span>
							</p:column>
							<p:column style="width:300px">
      							Tipo de trabalho: <span class="txtValor">#{item.tipoTrabalho}</span>
							</p:column>
							<p:column>
      							Status: <span class="txtValor">#{item.status}</span>
							</p:column>
						
							<p:column>
      							Criada Em: <h:outputLabel value="#{item.dataCriacao}"
									styleClass="txtValor">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputLabel>
							</p:column>

							<p:column style="width:50px">
								<p:commandButton oncomplete="PF('dlg').show()"
									update=":form:modalOrdem" image="/images/binoculoPreview.png">
									<f:setPropertyActionListener value="#{item}"
										target="#{solicitacaoBean.ordemSelecionada}" />
								</p:commandButton>
							</p:column>
						</p:dataTable>

						<p:dialog header="Basic Dialog" widgetVar="dlg" modal="true"
							height="500px" width="980px" id="modalOrdem">
							<h:panelGrid columns="1" columnClasses="txtLabel, txtValor"
								cellspacing="10">
								<p:outputLabel value="Ordem: " />
								<span class="txtValor">#{solicitacaoBean.ordemSelecionada.tipoOrdem}</span>

								<p:outputLabel value="Ciclo da Ordem: "
									rendered="#{solicitacaoBean.ordemSelecionada.cicloPreventiva != 0}" />
								<h:outputText
									value="#{solicitacaoBean.ordemSelecionada.cicloPreventiva}"
									rendered="#{solicitacaoBean.ordemSelecionada.cicloPreventiva != 0}" />

								<p:outputLabel value="Modo Corretivo: "
									rendered="#{solicitacaoBean.ordemSelecionada.cicloPreventiva == 0}" />
								<h:outputText styleClass="txtValor"
									value="#{solicitacaoBean.ordemSelecionada.modoCorretivo}"
									rendered="#{solicitacaoBean.ordemSelecionada.cicloPreventiva == 0}" />

								<p:outputLabel value="Status: " />
								<h:outputText styleClass="txtValor"
									value="#{solicitacaoBean.ordemSelecionada.status}" />

								<p:outputLabel value="Data de criação:" />
								<h:outputText styleClass="txtValor"
									value="#{solicitacaoBean.ordemSelecionada.dataCriacao}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</h:outputText>

							</h:panelGrid>
						</p:dialog>
					</p:panel>
				</div>
			</h:form>
		</div>
	</ui:define>
</ui:composition>